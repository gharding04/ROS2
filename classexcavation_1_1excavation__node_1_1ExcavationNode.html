<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Razorbotz RMC 2022-2023 Documentation: excavation.excavation_node.ExcavationNode Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Razorbotz RMC 2022-2023 Documentation
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><b>excavation</b></li><li class="navelem"><b>excavation_node</b></li><li class="navelem"><a class="el" href="classexcavation_1_1excavation__node_1_1ExcavationNode.html">ExcavationNode</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="classexcavation_1_1excavation__node_1_1ExcavationNode-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">excavation.excavation_node.ExcavationNode Class Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="dynheader">
Inheritance diagram for excavation.excavation_node.ExcavationNode:</div>
<div class="dyncontent">
<div class="center"><img src="classexcavation_1_1excavation__node_1_1ExcavationNode__inherit__graph.png" border="0" usemap="#aexcavation_8excavation__node_8ExcavationNode_inherit__map" alt="Inheritance graph"/></div>
<map name="aexcavation_8excavation__node_8ExcavationNode_inherit__map" id="aexcavation_8excavation__node_8ExcavationNode_inherit__map">
<area shape="rect" title=" " alt="" coords="5,79,159,120"/>
<area shape="rect" title=" " alt="" coords="56,5,108,31"/>
<area shape="poly" title=" " alt="" coords="85,46,85,79,79,79,79,46"/>
</map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for excavation.excavation_node.ExcavationNode:</div>
<div class="dyncontent">
<div class="center"><img src="classexcavation_1_1excavation__node_1_1ExcavationNode__coll__graph.png" border="0" usemap="#aexcavation_8excavation__node_8ExcavationNode_coll__map" alt="Collaboration graph"/></div>
<map name="aexcavation_8excavation__node_8ExcavationNode_coll__map" id="aexcavation_8excavation__node_8ExcavationNode_coll__map">
<area shape="rect" title=" " alt="" coords="5,79,159,120"/>
<area shape="rect" title=" " alt="" coords="56,5,108,31"/>
<area shape="poly" title=" " alt="" coords="85,46,85,79,79,79,79,46"/>
</map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a9c34d870df33dfa4b1fc1b3598b71857" id="r_a9c34d870df33dfa4b1fc1b3598b71857"><td class="memItemLeft" align="right" valign="top"><a id="a9c34d870df33dfa4b1fc1b3598b71857" name="a9c34d870df33dfa4b1fc1b3598b71857"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>__init__</b> (self)</td></tr>
<tr class="memdesc:a9c34d870df33dfa4b1fc1b3598b71857"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes the program, sets subscriptions. <br /></td></tr>
<tr class="separator:a9c34d870df33dfa4b1fc1b3598b71857"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4d97e1bf83643c3dd048b2634f2d4944" id="r_a4d97e1bf83643c3dd048b2634f2d4944"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a4d97e1bf83643c3dd048b2634f2d4944">errorChecking</a> (self, odrv, num)</td></tr>
<tr class="memdesc:a4d97e1bf83643c3dd048b2634f2d4944"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks motors for errors and corrects any errors found.  <br /></td></tr>
<tr class="separator:a4d97e1bf83643c3dd048b2634f2d4944"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aff5043405e82a1113b94e33ac162efdd" id="r_aff5043405e82a1113b94e33ac162efdd"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aff5043405e82a1113b94e33ac162efdd">calibrateSingleBoard</a> (self, odrv, num)</td></tr>
<tr class="memdesc:aff5043405e82a1113b94e33ac162efdd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calibrates the ODrive object specified.  <br /></td></tr>
<tr class="separator:aff5043405e82a1113b94e33ac162efdd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a00dec4afd72259a3c1315bf491979abb" id="r_a00dec4afd72259a3c1315bf491979abb"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a00dec4afd72259a3c1315bf491979abb">findODriveObjects</a> (self)</td></tr>
<tr class="memdesc:a00dec4afd72259a3c1315bf491979abb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function to find the ODrive boards.  <br /></td></tr>
<tr class="separator:a00dec4afd72259a3c1315bf491979abb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab5693efcaf67aca94f5b9b6d4a03c6b5" id="r_ab5693efcaf67aca94f5b9b6d4a03c6b5"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ab5693efcaf67aca94f5b9b6d4a03c6b5">setRequestedState</a> (self)</td></tr>
<tr class="memdesc:ab5693efcaf67aca94f5b9b6d4a03c6b5"><td class="mdescLeft">&#160;</td><td class="mdescRight">The first two motors are set up to run the drum while the second is set up to # control the angle of the arm.  <br /></td></tr>
<tr class="separator:ab5693efcaf67aca94f5b9b6d4a03c6b5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7dc6a3dd5f277ad2937506ecdc356e33" id="r_a7dc6a3dd5f277ad2937506ecdc356e33"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a7dc6a3dd5f277ad2937506ecdc356e33">excavationDrumCallback</a> (self, msg)</td></tr>
<tr class="memdesc:a7dc6a3dd5f277ad2937506ecdc356e33"><td class="mdescLeft">&#160;</td><td class="mdescRight">Excavation drum callback.  <br /></td></tr>
<tr class="separator:a7dc6a3dd5f277ad2937506ecdc356e33"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afa4f5c05569759064c81626ce9e3d264" id="r_afa4f5c05569759064c81626ce9e3d264"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#afa4f5c05569759064c81626ce9e3d264">excavationArmCallback</a> (self, msg)</td></tr>
<tr class="memdesc:afa4f5c05569759064c81626ce9e3d264"><td class="mdescLeft">&#160;</td><td class="mdescRight">Excavation arm callback.  <br /></td></tr>
<tr class="separator:afa4f5c05569759064c81626ce9e3d264"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac48b8f095926753e365fe82d2b7c0e79" id="r_ac48b8f095926753e365fe82d2b7c0e79"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac48b8f095926753e365fe82d2b7c0e79">stopCallback</a> (self, msg)</td></tr>
<tr class="memdesc:ac48b8f095926753e365fe82d2b7c0e79"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stop callback function.  <br /></td></tr>
<tr class="separator:ac48b8f095926753e365fe82d2b7c0e79"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae987f0852e7a04b5c56da5bd3e693c43" id="r_ae987f0852e7a04b5c56da5bd3e693c43"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae987f0852e7a04b5c56da5bd3e693c43">goCallback</a> (self, msg)</td></tr>
<tr class="memdesc:ae987f0852e7a04b5c56da5bd3e693c43"><td class="mdescLeft">&#160;</td><td class="mdescRight">Go callback function.  <br /></td></tr>
<tr class="separator:ae987f0852e7a04b5c56da5bd3e693c43"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af21cf7fc924d6316f81e8ea8af3129f7" id="r_af21cf7fc924d6316f81e8ea8af3129f7"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af21cf7fc924d6316f81e8ea8af3129f7">calibrate</a> (self)</td></tr>
<tr class="memdesc:af21cf7fc924d6316f81e8ea8af3129f7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initial motor calibration.  <br /></td></tr>
<tr class="separator:af21cf7fc924d6316f81e8ea8af3129f7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-attribs" name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:aedd42199b6d5e59e1a709da9618ad040" id="r_aedd42199b6d5e59e1a709da9618ad040"><td class="memItemLeft" align="right" valign="top"><a id="aedd42199b6d5e59e1a709da9618ad040" name="aedd42199b6d5e59e1a709da9618ad040"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>calibrated</b></td></tr>
<tr class="separator:aedd42199b6d5e59e1a709da9618ad040"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a60752a4fb0102cc5d3f97f454fa45c95" id="r_a60752a4fb0102cc5d3f97f454fa45c95"><td class="memItemLeft" align="right" valign="top"><a id="a60752a4fb0102cc5d3f97f454fa45c95" name="a60752a4fb0102cc5d3f97f454fa45c95"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>GO</b></td></tr>
<tr class="separator:a60752a4fb0102cc5d3f97f454fa45c95"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac0f0042797ebf26009abbe475677ebba" id="r_ac0f0042797ebf26009abbe475677ebba"><td class="memItemLeft" align="right" valign="top"><a id="ac0f0042797ebf26009abbe475677ebba" name="ac0f0042797ebf26009abbe475677ebba"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>errorState</b></td></tr>
<tr class="separator:ac0f0042797ebf26009abbe475677ebba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa85af0d8d5cf9bfd507298c1c45970bb" id="r_aa85af0d8d5cf9bfd507298c1c45970bb"><td class="memItemLeft" align="right" valign="top"><a id="aa85af0d8d5cf9bfd507298c1c45970bb" name="aa85af0d8d5cf9bfd507298c1c45970bb"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>restarted</b></td></tr>
<tr class="separator:aa85af0d8d5cf9bfd507298c1c45970bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aff4ffb80d7a3148aa08af5eb2c0a3d63" id="r_aff4ffb80d7a3148aa08af5eb2c0a3d63"><td class="memItemLeft" align="right" valign="top"><a id="aff4ffb80d7a3148aa08af5eb2c0a3d63" name="aff4ffb80d7a3148aa08af5eb2c0a3d63"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>excavationDrumSubscription</b></td></tr>
<tr class="separator:aff4ffb80d7a3148aa08af5eb2c0a3d63"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a18efa593581734ba322a3cf29bda0967" id="r_a18efa593581734ba322a3cf29bda0967"><td class="memItemLeft" align="right" valign="top"><a id="a18efa593581734ba322a3cf29bda0967" name="a18efa593581734ba322a3cf29bda0967"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>excavationArmSubscription</b></td></tr>
<tr class="separator:a18efa593581734ba322a3cf29bda0967"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a99d8ccde6f2cc23fc18c1a8e597eecd6" id="r_a99d8ccde6f2cc23fc18c1a8e597eecd6"><td class="memItemLeft" align="right" valign="top"><a id="a99d8ccde6f2cc23fc18c1a8e597eecd6" name="a99d8ccde6f2cc23fc18c1a8e597eecd6"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>stopSubscription</b></td></tr>
<tr class="separator:a99d8ccde6f2cc23fc18c1a8e597eecd6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a988c879199ae294f59d5b306f22b70ab" id="r_a988c879199ae294f59d5b306f22b70ab"><td class="memItemLeft" align="right" valign="top"><a id="a988c879199ae294f59d5b306f22b70ab" name="a988c879199ae294f59d5b306f22b70ab"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>goSubscription</b></td></tr>
<tr class="separator:a988c879199ae294f59d5b306f22b70ab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a89ceda1e7e3337afcc6f4b756be98009" id="r_a89ceda1e7e3337afcc6f4b756be98009"><td class="memItemLeft" align="right" valign="top"><a id="a89ceda1e7e3337afcc6f4b756be98009" name="a89ceda1e7e3337afcc6f4b756be98009"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>odrv0</b></td></tr>
<tr class="separator:a89ceda1e7e3337afcc6f4b756be98009"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="af21cf7fc924d6316f81e8ea8af3129f7" name="af21cf7fc924d6316f81e8ea8af3129f7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af21cf7fc924d6316f81e8ea8af3129f7">&#9670;&#160;</a></span>calibrate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">excavation.excavation_node.ExcavationNode.calibrate </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initial motor calibration. </p>
<p>Goes through all motors and sets them to the full calibration sequence, then waits until the motor is finished with the calibration before moving on to the next motor. If two motors are calibrating simultaneously on the same board, the current draw will shutdown the Jetson. </p>

</div>
</div>
<a id="aff5043405e82a1113b94e33ac162efdd" name="aff5043405e82a1113b94e33ac162efdd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aff5043405e82a1113b94e33ac162efdd">&#9670;&#160;</a></span>calibrateSingleBoard()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">excavation.excavation_node.ExcavationNode.calibrateSingleBoard </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>odrv</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>num</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Calibrates the ODrive object specified. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">odr</td><td>ODrive object being calibrated </td></tr>
    <tr><td class="paramname">num</td><td>Number of the ODrive object, used for printing to the screen </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a4d97e1bf83643c3dd048b2634f2d4944" name="a4d97e1bf83643c3dd048b2634f2d4944"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4d97e1bf83643c3dd048b2634f2d4944">&#9670;&#160;</a></span>errorChecking()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">excavation.excavation_node.ExcavationNode.errorChecking </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>odrv</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>num</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Checks motors for errors and corrects any errors found. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">odr</td><td>ODrive object being checked for errors </td></tr>
    <tr><td class="paramname">num</td><td>Number of the ODrive object, used for printing to the screen </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="afa4f5c05569759064c81626ce9e3d264" name="afa4f5c05569759064c81626ce9e3d264"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afa4f5c05569759064c81626ce9e3d264">&#9670;&#160;</a></span>excavationArmCallback()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">excavation.excavation_node.ExcavationNode.excavationArmCallback </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>msg</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Excavation arm callback. </p>
<p>The callback function triggered when the node receives a message of topic excavationArm. The ODrive motor has a max RPM of 8640 or 144 rev/sec. The input_vel command takes a float as input and sets the speed to that number of rev/sec, thus is upper bounded by the motor maximum of 144. Additionally, the motor has a tendency to throw errors if the new input_vel greatly differs from the previous command (ie &gt; ~10), so there is logic to ensure that any greatly differing command is handled gracefully. The expected input ranges from -1.0 to 1.0. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">msg</td><td>The message containing the speed data, ranges from -1.0 to 1.0 </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a7dc6a3dd5f277ad2937506ecdc356e33" name="a7dc6a3dd5f277ad2937506ecdc356e33"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7dc6a3dd5f277ad2937506ecdc356e33">&#9670;&#160;</a></span>excavationDrumCallback()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">excavation.excavation_node.ExcavationNode.excavationDrumCallback </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>msg</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Excavation drum callback. </p>
<p>The callback function triggered when the node receives a message of topic excavationDrum. The ODrive motor has a max RPM of 8640 or 144 rev/sec. The input_vel command takes a float as input and sets the speed to that number of rev/sec, thus is upper bounded by the motor maximum of 144. Additionally, the motor has a tendency to throw errors if the new input_vel greatly differs from the previous command (ie &gt; ~10), so there is logic to ensure that any greatly differing command is handled gracefully. The expected input ranges from -1.0 to 1.0. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">msg</td><td>The message containing the speed data, ranges from -1.0 to 1.0 </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a00dec4afd72259a3c1315bf491979abb" name="a00dec4afd72259a3c1315bf491979abb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a00dec4afd72259a3c1315bf491979abb">&#9670;&#160;</a></span>findODriveObjects()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">excavation.excavation_node.ExcavationNode.findODriveObjects </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function to find the ODrive boards. </p>
<p>The ODrive boards must be set to the following: odrv0 = 2083367F424D and odrv1 = 20773881304E. If the boards are inverted, the callbacks will be incorrect for the actions. <br  />
 </p>

</div>
</div>
<a id="ae987f0852e7a04b5c56da5bd3e693c43" name="ae987f0852e7a04b5c56da5bd3e693c43"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae987f0852e7a04b5c56da5bd3e693c43">&#9670;&#160;</a></span>goCallback()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">excavation.excavation_node.ExcavationNode.goCallback </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>msg</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Go callback function. </p>
<p>The function triggered when the node receives a message with the name GO, which is sent when the user presses the trigger. The GO variable is set to True, which allows the motors to be set to non-zero velocities. </p>

</div>
</div>
<a id="ab5693efcaf67aca94f5b9b6d4a03c6b5" name="ab5693efcaf67aca94f5b9b6d4a03c6b5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab5693efcaf67aca94f5b9b6d4a03c6b5">&#9670;&#160;</a></span>setRequestedState()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">excavation.excavation_node.ExcavationNode.setRequestedState </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The first two motors are set up to run the drum while the second is set up to # control the angle of the arm. </p>
<p>On both boards, axis0 is the primary axis while # axis1 mirrors it. Currently both boards are controlled with velocity control # but odrv1 might be better served doing position control to better allow it to # be automated. #</p>
<p>Sets motors in correct states</p>
<p>The motors must be calibrated and then set to the correct states to run correctly. For axis1 on both odrv0 and odrv1, the motor is configured to mirror axis 0, then put into input mode 7, which is mirrored input. This allows the motor to exactly mirror the output of axis 0 and prevents the motors from opposing each other. For both ODrive objects, axis 0 is set to control mode 2, velocity control, and initialized with a velocity of 0. They are then set to AXIS_STATE_CLOSED_LOOP_CONTROL, which allows the motors to run. </p>

</div>
</div>
<a id="ac48b8f095926753e365fe82d2b7c0e79" name="ac48b8f095926753e365fe82d2b7c0e79"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac48b8f095926753e365fe82d2b7c0e79">&#9670;&#160;</a></span>stopCallback()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">excavation.excavation_node.ExcavationNode.stopCallback </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>msg</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Stop callback function. </p>
<p>The function triggered when the node receives a message with the name STOP, which is sent when the user releases the trigger. The GO variable is set to False and the input_vel of both boards are set to zero. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>spinner/src/excavation/excavation/<a class="el" href="excavation__node_8py.html">excavation_node.py</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0
</small></address>
</body>
</html>
